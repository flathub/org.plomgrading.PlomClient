# SPDX-License-Identifier: FSFAP
# Copyright (C) 2022 Colin B. Macdonald
#
# Copying and distribution of this file, with or without modification,
# are permitted in any medium without royalty provided the copyright
# notice and this notice are preserved.  This file is offered as-is,
# without any warranty.

# Idea is to specify the available "manylinux" wheels for x86_64 and
# aarch64 to avoid building Pandas source (which I can't get working,
# something about numpy).  Inspired by an example by real-yfprojects:
# https://github.com/flatpak/flatpak-builder-tools/issues/296#issuecomment-1173037783
#
# I included the .tar.gz source as a fallback, but could be removed.

name: python3-pandas
buildsystem: simple
build-commands:
  - pip3 install --verbose --exists-action=i --no-index --find-links="file://${PWD}" --prefix=${FLATPAK_DEST} "pandas==1.4.4" --no-build-isolation
sources:
  - type: file
    url: https://pypi.io/packages/source/p/pandas/pandas-1.4.3.tar.gz
    sha256: ab6c0d738617b675183e5f28db32b5148b694ad9bba0a40c3ea26d96b431db67
  - type: file
    url: https://files.pythonhosted.org/packages/91/2e/f2e84148e71dda670b310f1f7b9a220181e5dc1fe2f9dcf6a8632412bf4e/pandas-1.4.4-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
    sha256: a981cfabf51c318a562deb4ae7deec594c07aee7cf18b4594a92c23718ec8275
    only-arches:
      - x86_64
  - type: file
    url: https://files.pythonhosted.org/packages/3f/ea/c80181902a2c9c15f796a0c729ca730052c5d95bfdc3689ad477e15f75d1/pandas-1.4.4-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl
    sha256: 9d2a7a3c1fea668d56bd91edbd5f2732e0af8feb9d2bf8d9bfacb2dea5fa9536
    only-arches:
      - aarch64
  - type: file
    url: https://files.pythonhosted.org/packages/fe/8c/1dfc141202fb2b6b75f9ca4a6681eb5cb7f328d6d2d9d186e5675c468e6a/numpy-1.23.3-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
    sha256: d5422d6a1ea9b15577a9432e26608c73a78faf0b9039437b075cf322c92e98e7
    only-arches:
      - x86_64
  - type: file
    url: https://files.pythonhosted.org/packages/07/ef/282bcb710c7e5a6f56a77529e5f8d42ad05ed44f87e65f2771937d5b84aa/numpy-1.23.3-cp39-cp39-manylinux_2_17_aarch64.manylinux2014_aarch64.whl
    sha256: e5d5420053bbb3dd64c30e58f9363d7a9c27444c3648e61460c1237f9ec3fa14
    only-arches:
      - aarch64
  - type: file
    url: https://files.pythonhosted.org/packages/d5/50/54451e88e3da4616286029a3a17fc377de817f66a0f50e1faaee90161724/pytz-2022.2.1-py2.py3-none-any.whl
    sha256: 220f481bdafa09c3955dfbdddb7b57780e9a94f5127e35456a48589b9e0c0197
